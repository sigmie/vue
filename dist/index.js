(function(r,i){typeof exports=="object"&&typeof module<"u"?i(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],i):(r=typeof globalThis<"u"?globalThis:r||self,i(r["@sigmie-vue"]={},r.Vue))})(this,function(r,i){"use strict";const n={__name:"SigmieSearch",props:{url:{type:String,default:null},search:{type:String,default:""},applicationId:{type:String,default:""},apiKey:{type:String,default:""},page:{type:Number,default:1},query:{type:String,default:""},filters:{type:String,default:""},facets:{type:String,default:""},perPage:{type:Number,default:10},sort:{type:String,default:"_score"},debounceMs:{type:Number,default:150}},setup(c){let t=c,a=i.reactive({autocomplete:[],hits:{},total:0,page:1,loading:!1,inited:!1,facets:{},processing_time_ms:0,per_page:10,last_page:0,current_page:1,from:0,to:0});i.onBeforeMount(()=>p());let p=function(){a.loading=!0;const o={query:t.query,per_page:t.perPage,filters:t.filters,facets:t.facets,page:t.page,sort:t.sort},l=t.url?t.url:`https://${t.applicationId}.sigmie.app/v1/search/${t.search}`;fetch(l,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json","X-Sigmie-API-Key":t.apiKey,"X-Sigmie-Application":t.applicationId},redirect:"follow",body:JSON.stringify(o)}).then(e=>e.json()).then(e=>{if(e.error)throw new Error(e.message,{cause:e});a.hits=e.hits,a.total=e.total,a.facets=e.facets,a.page=e.page,a.autocomplete=e.autocomplete,a.processing_time_ms=e.processing_time_ms,a.current_page=e.page,a.last_page=Math.ceil(e.total/t.perPage),a.from=(e.page-1)*t.perPage+1,a.to=Math.min(e.page*t.perPage,e.total),a.per_page=e.perPage,a.loading=!1,a.inited=!0})};return i.watch(t,p),(o,l)=>i.unref(a).inited?i.renderSlot(o.$slots,"default",i.normalizeProps(i.mergeProps({key:0},i.unref(a)))):i.createCommentVNode("",!0)}};r.SigmieSearch=n,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
