(function(i,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],r):(i=typeof globalThis<"u"?globalThis:i||self,r(i["@sigmie-vue"]={},i.Vue))})(this,function(i,r){"use strict";const u={__name:"SigmieSearch",props:{url:{type:String,default:null},search:{type:String,default:""},applicationId:{type:String,default:""},apiKey:{type:String,default:""},page:{type:Number,default:1},query:{type:String,default:""},filters:{type:String,default:""},facets:{type:String,default:""},perPage:{type:Number,default:10},sort:{type:String,default:"_score"},debounceMs:{type:Number,default:150}},setup(g){let e=g,a=r.reactive({autocomplete:[],hits:{},total:0,page:1,loading:!1,inited:!1,facets:{},processing_time_ms:0,per_page:10,last_page:0,current_page:1,from:0,to:0});r.onBeforeMount(()=>{l.value=[`https://${e.applicationId}-a.sigmie.app/v1/search/${e.search}`,`https://${e.applicationId}-b.sigmie.app/v1/search/${e.search}`,`https://${e.applicationId}-c.sigmie.app/v1/search/${e.search}`],o()});let l=r.ref([]),n=0;function f(){const p=l[n];return n=(n+1)%l.length,p}let o=function(){a.loading=!0;const p={query:e.query,per_page:e.perPage,filters:e.filters,facets:e.facets,page:e.page,sort:e.sort},c=e.url?e.url:f();fetch(c,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json","X-Sigmie-API-Key":e.apiKey,"X-Sigmie-Application":e.applicationId},redirect:"follow",body:JSON.stringify(p)}).then(t=>t.json()).then(t=>{if(t.error)throw new Error(t.message,{cause:t});a.hits=t.hits,a.total=t.total,a.facets=t.facets,a.page=t.page,a.autocomplete=t.autocomplete,a.processing_time_ms=t.processing_time_ms,a.current_page=t.page,a.last_page=Math.ceil(t.total/e.perPage),a.from=(t.page-1)*e.perPage+1,a.to=Math.min(t.page*e.perPage,t.total),a.per_page=t.perPage,a.loading=!1,a.inited=!0})};return r.watch(e,o),(p,c)=>r.unref(a).inited?r.renderSlot(p.$slots,"default",r.normalizeProps(r.mergeProps({key:0},r.unref(a)))):r.createCommentVNode("",!0)}};i.SigmieSearch=u,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
